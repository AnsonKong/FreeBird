(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{183:function(t,e,n){"use strict";var s=n(58);n(192);const a=n(191);var i={data(){return{initY:this.$store.state.navHeaderHeight-50,maxDistance:200,refreshDistance:150,transitionDuration:.5,active:!1,startY:0,moveY:0,touchEnabled:!1,doRefresh:!1,currentDistance:0}},methods:{onTouchStart(t){this.touchEnabled=!0,0===window.scrollY&&1===t.touches.length&&(this.startY=t.touches[0].clientY,window.addEventListener("touchmove",this.onTouchMove))},onMouseStart(t){this.touchEnabled||0!==window.scrollY||(this.startY=t.clientY,document.body.addEventListener("mousemove",this.onMouseMove))},onMouseMove(t){this.touchEnabled||(this.moveY=t.clientY,this._moveCalculate())},onTouchMove(t){this.startY&&1===t.touches.length&&(this.moveY=t.touches[0].clientY,this._moveCalculate())},_moveCalculate(){const t=this.moveY-this.startY;this.active?(this.currentDistance=Math.min(this.maxDistance,this.initY+t),this.doRefresh=this.currentDistance>this.refreshDistance,this.$refs.myContainer.style.top=this.currentDistance+"px",this.$refs.myIcon.style.opacity=this.doRefresh?1:.5):t>0?this._start():this._cancel()},onEnd(t){const e=Circ.easeOut;s.TweenLite.to(this.$refs.myContainer,this.transitionDuration,{top:`${this.initY}px`,ease:e,onComplete:()=>{this.doRefresh&&this.$emit("refresh"),this._cancel()}}),s.TweenLite.to(this.$data,this.transitionDuration,{currentDistance:0,ease:e})},_start(){this.active=!0,a.stopScroll(),this.touchEnabled?window.addEventListener("touchend",this.onEnd):window.addEventListener("mouseup",this.onEnd)},_cancel(){this.active=!1,this.startY=0,this.moveY=0,this.doRefresh=!1,a.startScroll(),window.removeEventListener("touchend",this.onEnd),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onEnd),document.body.removeEventListener("mousemove",this.onMouseMove)}},activated(){window.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousedown",this.onMouseStart)},deactivated(){window.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousedown",this.onMouseStart),this._cancel()}},o=(n(190),n(2)),r=Object(o.a)(i,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container",class:[this.active?"container-active":null]},[e("div",{ref:"myContainer",staticClass:"icon-container"},[e("i",{ref:"myIcon",staticClass:"iconfont icon-reload",style:{transform:"rotate("+360*this.currentDistance/this.maxDistance+"deg)"}})])])},[],!1,null,"392d4065",null);e.a=r.exports},184:function(t,e,n){var s=n(197);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,n(4).default)("03deaafe",s,!0,{})},185:function(t,e,n){var s=n(199);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,n(4).default)("6d52ae14",s,!0,{})},186:function(t,e,n){var s=n(201);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,n(4).default)("0dc8a338",s,!0,{})},189:function(t,e,n){(t.exports=n(3)(!1)).push([t.i,"\n.icon-reload[data-v-392d4065] {\n  font-size: 30px;\n  line-height: 50px;\n  color: #6fa9b3;\n  display: inline-block;\n}\n.container[data-v-392d4065] {\n  position: fixed;\n  background: rgba(0,0,0,0.2);\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  visibility: hidden;\n}\n.container-active[data-v-392d4065] {\n  visibility: visible;\n}\n.icon-container[data-v-392d4065] {\n  width: 50px;\n  height: 50px;\n  border-radius: 50px;\n  background: #fff;\n  position: absolute;\n  top: 80px;\n  left: calc(50% - 25px);\n  text-align: center;\n}\n",""])},190:function(t,e,n){"use strict";var s=n(56);n.n(s).a},191:function(t,e){t.exports={stopScroll(){document.body.style.overflow="hidden"},startScroll(){document.body.style.overflow="auto"}}},194:function(t,e,n){(t.exports=n(3)(!1)).push([t.i,"\n.iconfont[data-v-128025e4] {\n  color: #aaa;\n  font-size: 25px;\n}\n.heart[data-v-128025e4] {\n  opacity: 0;\n  position: absolute;\n  left: 0;\n}\n.like-container[data-v-128025e4] {\n  display: inline-block;\n  position: relative;\n}\n.like[data-v-128025e4] {\n  color: #aaa;\n  font-size: 20px;\n}\n",""])},195:function(t,e,n){"use strict";var s=n(57);n.n(s).a},196:function(t,e,n){var s={"./af":182,"./af.js":182,"./ar":181,"./ar-dz":180,"./ar-dz.js":180,"./ar-kw":179,"./ar-kw.js":179,"./ar-ly":178,"./ar-ly.js":178,"./ar-ma":177,"./ar-ma.js":177,"./ar-sa":176,"./ar-sa.js":176,"./ar-tn":175,"./ar-tn.js":175,"./ar.js":181,"./az":174,"./az.js":174,"./be":173,"./be.js":173,"./bg":172,"./bg.js":172,"./bm":171,"./bm.js":171,"./bn":170,"./bn.js":170,"./bo":169,"./bo.js":169,"./br":168,"./br.js":168,"./bs":167,"./bs.js":167,"./ca":166,"./ca.js":166,"./cs":165,"./cs.js":165,"./cv":164,"./cv.js":164,"./cy":163,"./cy.js":163,"./da":162,"./da.js":162,"./de":161,"./de-at":160,"./de-at.js":160,"./de-ch":159,"./de-ch.js":159,"./de.js":161,"./dv":158,"./dv.js":158,"./el":157,"./el.js":157,"./en-au":156,"./en-au.js":156,"./en-ca":155,"./en-ca.js":155,"./en-gb":154,"./en-gb.js":154,"./en-ie":153,"./en-ie.js":153,"./en-il":152,"./en-il.js":152,"./en-nz":151,"./en-nz.js":151,"./eo":150,"./eo.js":150,"./es":149,"./es-do":148,"./es-do.js":148,"./es-us":147,"./es-us.js":147,"./es.js":149,"./et":146,"./et.js":146,"./eu":145,"./eu.js":145,"./fa":144,"./fa.js":144,"./fi":143,"./fi.js":143,"./fo":142,"./fo.js":142,"./fr":141,"./fr-ca":140,"./fr-ca.js":140,"./fr-ch":139,"./fr-ch.js":139,"./fr.js":141,"./fy":138,"./fy.js":138,"./gd":137,"./gd.js":137,"./gl":136,"./gl.js":136,"./gom-latn":135,"./gom-latn.js":135,"./gu":134,"./gu.js":134,"./he":133,"./he.js":133,"./hi":132,"./hi.js":132,"./hr":131,"./hr.js":131,"./hu":130,"./hu.js":130,"./hy-am":129,"./hy-am.js":129,"./id":128,"./id.js":128,"./is":127,"./is.js":127,"./it":126,"./it.js":126,"./ja":125,"./ja.js":125,"./jv":124,"./jv.js":124,"./ka":123,"./ka.js":123,"./kk":122,"./kk.js":122,"./km":121,"./km.js":121,"./kn":120,"./kn.js":120,"./ko":119,"./ko.js":119,"./ky":118,"./ky.js":118,"./lb":117,"./lb.js":117,"./lo":116,"./lo.js":116,"./lt":115,"./lt.js":115,"./lv":114,"./lv.js":114,"./me":113,"./me.js":113,"./mi":112,"./mi.js":112,"./mk":111,"./mk.js":111,"./ml":110,"./ml.js":110,"./mn":109,"./mn.js":109,"./mr":108,"./mr.js":108,"./ms":107,"./ms-my":106,"./ms-my.js":106,"./ms.js":107,"./mt":105,"./mt.js":105,"./my":104,"./my.js":104,"./nb":103,"./nb.js":103,"./ne":102,"./ne.js":102,"./nl":101,"./nl-be":100,"./nl-be.js":100,"./nl.js":101,"./nn":99,"./nn.js":99,"./pa-in":98,"./pa-in.js":98,"./pl":97,"./pl.js":97,"./pt":96,"./pt-br":95,"./pt-br.js":95,"./pt.js":96,"./ro":94,"./ro.js":94,"./ru":93,"./ru.js":93,"./sd":92,"./sd.js":92,"./se":91,"./se.js":91,"./si":90,"./si.js":90,"./sk":89,"./sk.js":89,"./sl":88,"./sl.js":88,"./sq":87,"./sq.js":87,"./sr":86,"./sr-cyrl":85,"./sr-cyrl.js":85,"./sr.js":86,"./ss":84,"./ss.js":84,"./sv":83,"./sv.js":83,"./sw":82,"./sw.js":82,"./ta":81,"./ta.js":81,"./te":80,"./te.js":80,"./tet":79,"./tet.js":79,"./tg":78,"./tg.js":78,"./th":77,"./th.js":77,"./tl-ph":76,"./tl-ph.js":76,"./tlh":75,"./tlh.js":75,"./tr":74,"./tr.js":74,"./tzl":73,"./tzl.js":73,"./tzm":72,"./tzm-latn":71,"./tzm-latn.js":71,"./tzm.js":72,"./ug-cn":70,"./ug-cn.js":70,"./uk":69,"./uk.js":69,"./ur":68,"./ur.js":68,"./uz":67,"./uz-latn":66,"./uz-latn.js":66,"./uz.js":67,"./vi":65,"./vi.js":65,"./x-pseudo":64,"./x-pseudo.js":64,"./yo":63,"./yo.js":63,"./zh-cn":62,"./zh-cn.js":62,"./zh-hk":61,"./zh-hk.js":61,"./zh-tw":60,"./zh-tw.js":60};function a(t){var e=i(t);return n(e)}function i(t){var e=s[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}a.keys=function(){return Object.keys(s)},a.resolve=i,t.exports=a,a.id=196},197:function(t,e,n){(t.exports=n(3)(!1)).push([t.i,"\n.hr[data-v-0fe009c9] {\n  height: 1px;\n  background: #ddd;\n  margin-bottom: 10px;\n}\n.non-comment[data-v-0fe009c9] {\n  color: #ccc;\n}\n.comment-container[data-v-0fe009c9] {\n  margin: 25px 0;\n}\n.comments-title[data-v-0fe009c9] {\n  font-size: 20px;\n}\n.input-nav[data-v-0fe009c9] {\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n.iconfont[data-v-0fe009c9] {\n  font-size: 25px;\n  color: #aaa;\n}\n.icon-heart[data-v-0fe009c9] {\n  margin: 0 5px;\n}\n.icon-container[data-v-0fe009c9] {\n  margin-top: 25px;\n}\n.avatar-container[data-v-0fe009c9] {\n  text-align: center;\n  padding: 15px;\n}\n.author[data-v-0fe009c9] {\n  text-align: center;\n  font-weight: bold;\n}\n.content-container[data-v-0fe009c9] {\n  padding: 15px;\n}\n.comments-container[data-v-0fe009c9] {\n  padding: 15px;\n  padding-bottom: 50px;\n}\n.content[data-v-0fe009c9] {\n  font-size: 20px;\n}\n.time[data-v-0fe009c9] {\n  text-align: right;\n  color: #ccc;\n}\n",""])},198:function(t,e,n){"use strict";var s=n(184);n.n(s).a},199:function(t,e,n){(t.exports=n(3)(!1)).push([t.i,"\n.user[data-v-234fcd0d] {\n  font-weight: bold;\n}\n.info-container[data-v-234fcd0d] {\n  margin-bottom: 10px;\n  display: flex;\n  justify-content: space-between;\n}\n.container[data-v-234fcd0d] {\n  display: flex;\n}\n.my-avatar[data-v-234fcd0d] {\n  flex-shrink: 0;\n}\n.main-container[data-v-234fcd0d] {\n  margin-left: 10px;\n  width: 100%;\n}\n",""])},200:function(t,e,n){"use strict";var s=n(185);n.n(s).a},201:function(t,e,n){(t.exports=n(3)(!1)).push([t.i,"\ntextarea[data-v-6a4d07ca] {\n  border: solid 0;\n  border-bottom: solid 1px #ccc;\n  width: 100%;\n  font-size: 20px;\n  resize: none;\n  box-sizing: border-box;\n  margin-right: 10px;\n}\ntextarea[data-v-6a4d07ca]:focus {\n  border-bottom: solid 1px #6fa9b3;\n}\n.container[data-v-6a4d07ca] {\n  border-top: solid 1px #ccc;\n  background: #fff;\n  display: flex;\n  align-items: flex-end;\n  padding: 10px;\n  box-shadow: 0 0 2px 1px rgba(0,0,0,0.2);\n}\n",""])},202:function(t,e,n){"use strict";var s=n(186);n.n(s).a},212:function(t,e,n){"use strict";n.r(e);var s=n(14),a={data:()=>({currentValue:"",lines:1}),mounted(){this._updateInputHeight()},deactivated(){this._clear()},methods:{onSend(){this.currentValue&&(this.$emit("send",this.currentValue),this._clear())},onInput(){this._updateInputHeight()},_updateInputHeight(){const t=this.currentValue.match(/\n/gm);this.lines=1+(t?t.length:0)},_clear(){this.currentValue="",this.lines=1}}},i=(n(202),n(2)),o=Object(i.a)(a,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],ref:"myInput",attrs:{placeholder:"comment here",rows:t.lines},domProps:{value:t.currentValue},on:{input:[function(e){e.target.composing||(t.currentValue=e.target.value)},t.onInput]}}),n("div",{staticClass:"c-btn c-btn--white c-btn--small c-btn--round c-btn--narrow",class:[t.currentValue?null:"c-btn--disabled"],on:{click:t.onSend}},[t._v("Send")])])},[],!1,null,"6a4d07ca",null).exports,r=n(13),c=n(59),l={props:["item"],components:{avatar:r.a,heart:c.a}},d=(n(200),Object(i.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("avatar",{staticClass:"my-avatar",attrs:{"avatar-width":"40px","bg-color":"#eee","icon-color":"#aaa",round:!1,"avatar-url":t.item.user?t.item.user.avatar_url:null}}),n("div",{staticClass:"main-container"},[n("div",{staticClass:"info-container"},[n("span",{staticClass:"user"},[t._v(t._s(t.item.user?t.item.user.name:"annoymous"))]),n("heart",{attrs:{item:t.item,api:"/api/comment/like"}})],1),n("div",{staticClass:"comment",domProps:{innerHTML:t._s(t.input2Html(t.item.comment))}})])],1)},[],!1,null,"234fcd0d",null).exports),h=n(183),m=n(58);const u=n(24),v=n(55);var f={components:{"nav-menu":s.a,avatar:r.a,comment:d,heart:c.a,"input-nav":o,refresh:h.a},data:()=>({article:{},shareLink:"",total:0,comments:[]}),computed:{articleId(){return this.$route.params.id},time(){return this.article.time?v(this.article.time).fromNow():"time"}},methods:{loadArticle(){u.get(`/api/article/${this.articleId}`).then(t=>{this.article=t.data,this.total=this.article.comments_count,this.shareLink=`${window.location.origin}/article/${this.article._id}`,this.loadComments()}).catch(t=>{this.toast("load error "+t)})},loadComments(){u.get("/api/comments",{params:{article:this.articleId}}).then(t=>{t.data?(this.comments=this.comments.concat(t.data),this.$nextTick(function(){if(this.$route.hash){const t=this.$route.hash.replace("#","");if(this.$refs[t]){const e=this.$refs[t][0].getBoundingClientRect();window.scrollTo(0,e.top-this.$store.state.navHeaderHeight)}}})):this.comments.length&&this.toast("no more comments.")}).catch(t=>{this.toast("load error, please check your network.")})},commentArticle(t){u.post("/api/comments",{article:this.articleId,comment:t}).then(t=>{this.total++,this.comments.unshift(t.data),this.toast("comment successfully!"),this.$nextTick(function(){const t=this.$refs["comment-list"].firstChild;m.TweenLite.fromTo(t,.5,{opacity:0},{opacity:1})}),this._scrollToCommentsTop()}).catch(t=>{this.toast("comment error "+t)})},onSend(t){this.commentArticle(t)},onRefresh(){this.toast("refresh successfully!"),this._clear(),this.loadArticle()},_scrollToCommentsTop(){const t=this.$refs["comments-container"].getBoundingClientRect();window.scrollBy(0,t.top-this.$store.state.navHeaderHeight)},_clear(){this.article={},this.shareLink="",this.total=0,this.comments.length=0}},activated(){this.loadArticle()},deactivated(){this._clear()}},p=(n(198),Object(i.a)(f,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"root-container"},[n("nav-menu",{staticClass:"head head-stick"}),n("div",{staticClass:"avatar-container"},[n("avatar",{attrs:{"avatar-url":t.article.avatar?t.article.avatar:null,"bg-color":"#eee","icon-color":"#aaa"}}),n("div",{staticClass:"author"},[t._v(t._s(t.article.author?t.article.author:"annoymous"))])],1),n("div",{staticClass:"content-container"},[n("div",{staticClass:"time"},[t._v(t._s(t.time))]),n("div",{staticClass:"content"},[t._v(t._s(t.article.content?t.article.content:"empty content"))]),n("div",{staticClass:"icon-container"},[n("i",{staticClass:"iconfont icon-share copy",attrs:{"data-clipboard-text":t.shareLink}}),n("heart",{attrs:{item:t.article,api:"/api/article/like"}})],1)]),n("div",{staticClass:"hr"}),n("div",{ref:"comments-container",staticClass:"comments-container"},[n("div",{staticClass:"comments-title"},[t._v("Comments ("+t._s(t.total)+")")]),n("ul",{ref:"comment-list"},t._l(t.comments,function(t,e){return n("li",{key:t._id,ref:t._id,refInFor:!0,staticClass:"comment-container"},[n("div",{staticClass:"hr"}),n("comment",{attrs:{item:t}})],1)})),0===t.comments.length?n("div",{staticClass:"non-comment"},[t._v("Leave a comment?")]):t._e()]),n("input-nav",{staticClass:"input-nav",on:{send:t.onSend}}),n("refresh",{on:{refresh:t.onRefresh}})],1)},[],!1,null,"0fe009c9",null));e.default=p.exports},56:function(t,e,n){var s=n(189);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,n(4).default)("2b833ecb",s,!0,{})},57:function(t,e,n){var s=n(194);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,n(4).default)("75b6a4be",s,!0,{})},59:function(t,e,n){"use strict";var s=n(58);const a=n(24);var i={props:["item","api"],data:()=>({like:!1,likePopTop:"-30px"}),methods:{onHeart(){a.post(this.api,{id:this.item._id}).then(t=>{0===t.data.code?(this.like=!0,void 0==this.item.like?this.$set(this.item,"like",1):this.item.like++,s.TweenLite.fromTo(this.$refs.myHeart,.5,{top:"0",opacity:1},{top:this.likePopTop,opacity:0})):this.toast("like failed: "+t.data.code)}).catch(t=>{this.toast("like failed: "+t)})}}},o=(n(195),n(2)),r=Object(o.a)(i,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"like-container",on:{click:this.onHeart}},[e("i",{ref:"myHeart",staticClass:"iconfont icon-heart-fill heart"}),e("i",{class:["iconfont",this.like?"icon-heart-fill":"icon-heart"]}),e("span",{staticClass:"like"},[this._v(this._s(this.item.like))])])},[],!1,null,"128025e4",null);e.a=r.exports}}]);
//# sourceMappingURL=1.9d808cdf6b0acf31c2f5.js.map