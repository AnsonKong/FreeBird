(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{182:function(t,s,n){"use strict";var e=n(57);n(191);const i=n(190);var a={data(){return{initY:this.$store.state.navHeaderHeight-50,maxDistance:200,refreshDistance:150,transitionDuration:.5,active:!1,startY:0,moveY:0,touchEnabled:!1,doRefresh:!1,currentDistance:0}},methods:{onTouchStart(t){this.touchEnabled=!0,0===window.scrollY&&1===t.touches.length&&(this.startY=t.touches[0].clientY,window.addEventListener("touchmove",this.onTouchMove))},onMouseStart(t){this.touchEnabled||0!==window.scrollY||(this.startY=t.clientY,document.body.addEventListener("mousemove",this.onMouseMove))},onMouseMove(t){this.touchEnabled||(this.moveY=t.clientY,this._moveCalculate())},onTouchMove(t){this.startY&&1===t.touches.length&&(this.moveY=t.touches[0].clientY,this._moveCalculate())},_moveCalculate(){const t=this.moveY-this.startY;this.active?(this.currentDistance=Math.min(this.maxDistance,this.initY+t),this.doRefresh=this.currentDistance>this.refreshDistance,this.$refs.myContainer.style.top=this.currentDistance+"px",this.$refs.myIcon.style.opacity=this.doRefresh?1:.5):t>0?this._start():this._cancel()},onEnd(t){const s=Circ.easeOut;e.TweenLite.to(this.$refs.myContainer,this.transitionDuration,{top:`${this.initY}px`,ease:s,onComplete:()=>{this.doRefresh&&this.$emit("refresh"),this._cancel()}}),e.TweenLite.to(this.$data,this.transitionDuration,{currentDistance:0,ease:s})},_start(){this.active=!0,i.stopScroll(),this.touchEnabled?window.addEventListener("touchend",this.onEnd):window.addEventListener("mouseup",this.onEnd)},_cancel(){this.active=!1,this.startY=0,this.moveY=0,this.doRefresh=!1,i.startScroll(),window.removeEventListener("touchend",this.onEnd),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onEnd),document.body.removeEventListener("mousemove",this.onMouseMove)}},activated(){window.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousedown",this.onMouseStart)},deactivated(){window.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousedown",this.onMouseStart),this._cancel()}},o=(n(189),n(2)),r=Object(o.a)(a,function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"container",class:[this.active?"container-active":null]},[s("div",{ref:"myContainer",staticClass:"icon-container"},[s("i",{ref:"myIcon",staticClass:"iconfont icon-reload",style:{transform:"rotate("+360*this.currentDistance/this.maxDistance+"deg)"}})])])},[],!1,null,"392d4065",null);s.a=r.exports},187:function(t,s,n){var e=n(204);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);(0,n(4).default)("7cd4ea18",e,!0,{})},188:function(t,s,n){(t.exports=n(3)(!1)).push([t.i,"\n.icon-reload[data-v-392d4065] {\n  font-size: 30px;\n  line-height: 50px;\n  color: #6fa9b3;\n  display: inline-block;\n}\n.container[data-v-392d4065] {\n  position: fixed;\n  background: rgba(0,0,0,0.2);\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  visibility: hidden;\n}\n.container-active[data-v-392d4065] {\n  visibility: visible;\n}\n.icon-container[data-v-392d4065] {\n  width: 50px;\n  height: 50px;\n  border-radius: 50px;\n  background: #fff;\n  position: absolute;\n  top: 80px;\n  left: calc(50% - 25px);\n  text-align: center;\n}\n",""])},189:function(t,s,n){"use strict";var e=n(55);n.n(e).a},190:function(t,s){t.exports={stopScroll(){document.body.style.overflow="hidden"},startScroll(){document.body.style.overflow="auto"}}},192:function(t,s,n){var e=n(206);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);(0,n(4).default)("536ee61c",e,!0,{})},193:function(t,s,n){(t.exports=n(3)(!1)).push([t.i,"\n.iconfont[data-v-128025e4] {\n  color: #aaa;\n  font-size: 25px;\n}\n.heart[data-v-128025e4] {\n  opacity: 0;\n  position: absolute;\n  left: 0;\n}\n.like-container[data-v-128025e4] {\n  display: inline-block;\n  position: relative;\n}\n.like[data-v-128025e4] {\n  color: #aaa;\n  font-size: 20px;\n}\n",""])},194:function(t,s,n){"use strict";var e=n(56);n.n(e).a},195:function(t,s,n){var e={"./af":181,"./af.js":181,"./ar":180,"./ar-dz":179,"./ar-dz.js":179,"./ar-kw":178,"./ar-kw.js":178,"./ar-ly":177,"./ar-ly.js":177,"./ar-ma":176,"./ar-ma.js":176,"./ar-sa":175,"./ar-sa.js":175,"./ar-tn":174,"./ar-tn.js":174,"./ar.js":180,"./az":173,"./az.js":173,"./be":172,"./be.js":172,"./bg":171,"./bg.js":171,"./bm":170,"./bm.js":170,"./bn":169,"./bn.js":169,"./bo":168,"./bo.js":168,"./br":167,"./br.js":167,"./bs":166,"./bs.js":166,"./ca":165,"./ca.js":165,"./cs":164,"./cs.js":164,"./cv":163,"./cv.js":163,"./cy":162,"./cy.js":162,"./da":161,"./da.js":161,"./de":160,"./de-at":159,"./de-at.js":159,"./de-ch":158,"./de-ch.js":158,"./de.js":160,"./dv":157,"./dv.js":157,"./el":156,"./el.js":156,"./en-au":155,"./en-au.js":155,"./en-ca":154,"./en-ca.js":154,"./en-gb":153,"./en-gb.js":153,"./en-ie":152,"./en-ie.js":152,"./en-il":151,"./en-il.js":151,"./en-nz":150,"./en-nz.js":150,"./eo":149,"./eo.js":149,"./es":148,"./es-do":147,"./es-do.js":147,"./es-us":146,"./es-us.js":146,"./es.js":148,"./et":145,"./et.js":145,"./eu":144,"./eu.js":144,"./fa":143,"./fa.js":143,"./fi":142,"./fi.js":142,"./fo":141,"./fo.js":141,"./fr":140,"./fr-ca":139,"./fr-ca.js":139,"./fr-ch":138,"./fr-ch.js":138,"./fr.js":140,"./fy":137,"./fy.js":137,"./gd":136,"./gd.js":136,"./gl":135,"./gl.js":135,"./gom-latn":134,"./gom-latn.js":134,"./gu":133,"./gu.js":133,"./he":132,"./he.js":132,"./hi":131,"./hi.js":131,"./hr":130,"./hr.js":130,"./hu":129,"./hu.js":129,"./hy-am":128,"./hy-am.js":128,"./id":127,"./id.js":127,"./is":126,"./is.js":126,"./it":125,"./it.js":125,"./ja":124,"./ja.js":124,"./jv":123,"./jv.js":123,"./ka":122,"./ka.js":122,"./kk":121,"./kk.js":121,"./km":120,"./km.js":120,"./kn":119,"./kn.js":119,"./ko":118,"./ko.js":118,"./ky":117,"./ky.js":117,"./lb":116,"./lb.js":116,"./lo":115,"./lo.js":115,"./lt":114,"./lt.js":114,"./lv":113,"./lv.js":113,"./me":112,"./me.js":112,"./mi":111,"./mi.js":111,"./mk":110,"./mk.js":110,"./ml":109,"./ml.js":109,"./mn":108,"./mn.js":108,"./mr":107,"./mr.js":107,"./ms":106,"./ms-my":105,"./ms-my.js":105,"./ms.js":106,"./mt":104,"./mt.js":104,"./my":103,"./my.js":103,"./nb":102,"./nb.js":102,"./ne":101,"./ne.js":101,"./nl":100,"./nl-be":99,"./nl-be.js":99,"./nl.js":100,"./nn":98,"./nn.js":98,"./pa-in":97,"./pa-in.js":97,"./pl":96,"./pl.js":96,"./pt":95,"./pt-br":94,"./pt-br.js":94,"./pt.js":95,"./ro":93,"./ro.js":93,"./ru":92,"./ru.js":92,"./sd":91,"./sd.js":91,"./se":90,"./se.js":90,"./si":89,"./si.js":89,"./sk":88,"./sk.js":88,"./sl":87,"./sl.js":87,"./sq":86,"./sq.js":86,"./sr":85,"./sr-cyrl":84,"./sr-cyrl.js":84,"./sr.js":85,"./ss":83,"./ss.js":83,"./sv":82,"./sv.js":82,"./sw":81,"./sw.js":81,"./ta":80,"./ta.js":80,"./te":79,"./te.js":79,"./tet":78,"./tet.js":78,"./tg":77,"./tg.js":77,"./th":76,"./th.js":76,"./tl-ph":75,"./tl-ph.js":75,"./tlh":74,"./tlh.js":74,"./tr":73,"./tr.js":73,"./tzl":72,"./tzl.js":72,"./tzm":71,"./tzm-latn":70,"./tzm-latn.js":70,"./tzm.js":71,"./ug-cn":69,"./ug-cn.js":69,"./uk":68,"./uk.js":68,"./ur":67,"./ur.js":67,"./uz":66,"./uz-latn":65,"./uz-latn.js":65,"./uz.js":66,"./vi":64,"./vi.js":64,"./x-pseudo":63,"./x-pseudo.js":63,"./yo":62,"./yo.js":62,"./zh-cn":61,"./zh-cn.js":61,"./zh-hk":60,"./zh-hk.js":60,"./zh-tw":59,"./zh-tw.js":59};function i(t){var s=a(t);return n(s)}function a(t){var s=e[t];if(!(s+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return s}i.keys=function(){return Object.keys(e)},i.resolve=a,t.exports=i,i.id=195},204:function(t,s,n){(t.exports=n(3)(!1)).push([t.i,"\n.empty-container[data-v-3a7a3e39] {\n  text-align: center;\n  color: #ccc;\n  font-size: 20px;\n  padding-top: 10px;\n}\n.write-btn[data-v-3a7a3e39] {\n  position: fixed;\n  bottom: 30px;\n  right: 30px;\n  width: 50px;\n  height: 50px;\n  background: #6fa9b3;\n  text-align: center;\n  border-radius: 50px;\n  line-height: 50px;\n  box-shadow: 0 0 2px 1px rgba(0,0,0,0.2);\n}\n.iconfont[data-v-3a7a3e39] {\n  color: #fff;\n  font-size: 30px;\n}\n",""])},205:function(t,s,n){"use strict";var e=n(187);n.n(e).a},206:function(t,s,n){(t.exports=n(3)(!1)).push([t.i,"\n.icons-container[data-v-f0774dd0] {\n  display: inline-block;\n}\n.comment-count[data-v-f0774dd0] {\n  color: #aaa;\n  font-size: 20px;\n}\n.my-avatar[data-v-f0774dd0] {\n  flex-shrink: 0;\n}\n.iconfont[data-v-f0774dd0] {\n  color: #aaa;\n  font-size: 25px;\n  display: inline-block;\n}\n.icon-share[data-v-f0774dd0] {\n  margin-right: 5px;\n}\n.icon-mail[data-v-f0774dd0] {\n  margin-left: 5px;\n}\n.container[data-v-f0774dd0] {\n  box-sizing: border-box;\n  border-bottom: solid 1px #ddd;\n  padding: 15px;\n  display: flex;\n}\n.info-container[data-v-f0774dd0] {\n  width: 100%;\n  margin-left: 10px;\n}\n.top-container[data-v-f0774dd0] {\n  position: relative;\n}\n.author[data-v-f0774dd0] {\n  font-weight: bold;\n  font-size: 18px;\n  display: inline-block;\n  max-width: 250px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.content[data-v-f0774dd0] {\n  font-size: 18px;\n}\n.time[data-v-f0774dd0] {\n  position: absolute;\n  right: 0;\n  color: #ccc;\n}\n.icon-edit[data-v-f0774dd0] {\n  float: right;\n}\n",""])},207:function(t,s,n){"use strict";var e=n(192);n.n(e).a},210:function(t,s,n){"use strict";n.r(s);var e=n(14),i=n(13),a=n(58);const o=n(54);var r={components:{avatar:i.a,heart:a.a},props:["item"],methods:{read(){this.$router.push(`/article/${this.item._id}`)},onRead(t){!1===this.$refs.btns.contains(t.target)&&this.read()},onComment(){this.read()}},computed:{time(){return o(this.item.time).fromNow()},shareLink(){return`${window.location.origin}/article/${this.item._id}`}}},c=(n(207),n(2)),l=Object(c.a)(r,function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"container",on:{click:function(s){t.onRead(s)}}},[n("avatar",{staticClass:"my-avatar",attrs:{"avatar-url":t.item.avatar?t.item.avatar:null,"bg-color":"#eee","icon-color":"#aaa",round:!1,"avatar-width":"40px"}}),n("div",{staticClass:"info-container"},[n("div",{staticClass:"top-container"},[n("span",{staticClass:"author"},[t._v(t._s(t.item.author))]),n("span",{staticClass:"time"},[t._v(t._s(t.time))])]),n("p",{staticClass:"content",domProps:{innerHTML:t._s(t.input2Html(t.item.content))}}),n("div",{ref:"btns",staticClass:"icons-container"},[n("i",{staticClass:"iconfont icon-share copy",attrs:{"data-clipboard-text":t.shareLink}}),n("heart",{attrs:{item:t.item,api:"/api/article/like"}}),n("i",{staticClass:"iconfont icon-mail",on:{click:function(s){return s.stopPropagation(),t.onComment(s)}}}),n("span",{staticClass:"comment-count"},[t._v(t._s(t.item.comments_count))])],1)])],1)},[],!1,null,"f0774dd0",null).exports;const d=n(191);var h={data:()=>({throttleWrapper:null,loadmoreTriggerDistance:50,lastScrollY:0}),methods:{onScroll(){const t=window.scrollY>this.lastScrollY;this.lastScrollY=window.scrollY,this.$emit("scrollChanged",this.lastScrollY),t&&window.scrollY+window.innerHeight>=document.body.scrollHeight-this.loadmoreTriggerDistance&&this.$emit("loadmore")}},activated(){this.throttleWrapper=d(this.onScroll,100),window.addEventListener("scroll",this.throttleWrapper)},deactivated(){window.removeEventListener("scroll",this.throttleWrapper),this.throttleWrapper=null}},u=Object(c.a)(h,function(){var t=this.$createElement;return(this._self._c||t)("div")},[],!1,null,null,null).exports,m=n(182),p=n(57),f=n(5),v=n(23),j=n.n(v),b={components:{"nav-menu":e.a,subject:l,loadmore:u,refresh:m.a},computed:{user(){return this.$store.state.user}},methods:{loadData(){this.loading?this.toast("loading more data, please wait."):(this.loading=!0,j.a.get("/api/articles",{params:{since:this.since,count:this.count}}).then(t=>{t.data.length?(0===this.items.length&&p.TweenLite.fromTo(this.$refs["article-list"],1,{opacity:0},{opacity:1}),this.items=this.items.concat(t.data),this.since=this.items[this.items.length-1].time):this.toast("no more data."),this.loading=!1}).catch(t=>{this.toast("load error, please check your network."),this.loading=!1}))},onRefresh(){this.toast("refresh successfully!"),this._clear(),this.loadData()},_clear(){this.since=null,this.items.length=0,this.lastScrollY=0},onNewArticle(t){this.lastScrollY=0,this.items.unshift(t),this.$nextTick(function(){const t=this.$refs["article-list"].firstChild;p.TweenLite.fromTo(t,.5,{opacity:0},{opacity:1})})},onLoadMore(){this.loadData()},onScrollChanged(t){this.lastScrollY=t}},mounted(){this.loadData(),f.a.$on("newArticle",this.onNewArticle)},activated(){window.scrollTo(0,this.lastScrollY)},data:()=>({since:null,count:10,items:[],lastScrollY:0,loading:!1})},w=(n(205),Object(c.a)(b,function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"container"},[n("nav-menu",{staticClass:"head head-stick"}),n("div",{ref:"myContainer"},[n("div",{ref:"article-list"},t._l(t.items,function(t,s){return n("subject",{key:t._id,attrs:{item:t}})})),n("router-link",{attrs:{to:"/article/create"}},[n("div",{staticClass:"write-btn"},[n("i",{staticClass:"iconfont icon-edit"})])]),0===t.items.length?n("div",{staticClass:"empty-container"},[t._v("ooh! it's empty, any thoughts?")]):t._e()],1),n("refresh",{on:{refresh:t.onRefresh}}),n("loadmore",{on:{loadmore:t.onLoadMore,scrollChanged:t.onScrollChanged}})],1)},[],!1,null,"3a7a3e39",null));s.default=w.exports},55:function(t,s,n){var e=n(188);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);(0,n(4).default)("2b833ecb",e,!0,{})},56:function(t,s,n){var e=n(193);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);(0,n(4).default)("75b6a4be",e,!0,{})},58:function(t,s,n){"use strict";var e=n(57);const i=n(23);var a={props:["item","api"],data:()=>({like:!1,likePopTop:"-30px"}),methods:{onHeart(){i.post(this.api,{id:this.item._id}).then(t=>{0===t.data.code?(this.like=!0,void 0==this.item.like?this.$set(this.item,"like",1):this.item.like++,e.TweenLite.fromTo(this.$refs.myHeart,.5,{top:"0",opacity:1},{top:this.likePopTop,opacity:0})):this.toast("like failed: "+t.data.code)}).catch(t=>{this.toast("like failed: "+t)})}}},o=(n(194),n(2)),r=Object(o.a)(a,function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"like-container",on:{click:this.onHeart}},[s("i",{ref:"myHeart",staticClass:"iconfont icon-heart-fill heart"}),s("i",{class:["iconfont",this.like?"icon-heart-fill":"icon-heart"]}),s("span",{staticClass:"like"},[this._v(this._s(this.item.like))])])},[],!1,null,"128025e4",null);s.a=r.exports}}]);