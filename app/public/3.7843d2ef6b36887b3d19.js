(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{183:function(t,s,n){"use strict";var e=n(58);n(192);const i=n(191);var a={data(){return{initY:this.$store.state.navHeaderHeight-50,maxDistance:200,refreshDistance:150,transitionDuration:.5,active:!1,startY:0,moveY:0,touchEnabled:!1,doRefresh:!1,currentDistance:0}},methods:{onTouchStart(t){this.touchEnabled=!0,0===window.scrollY&&1===t.touches.length&&(this.startY=t.touches[0].clientY,window.addEventListener("touchmove",this.onTouchMove))},onMouseStart(t){this.touchEnabled||0!==window.scrollY||(this.startY=t.clientY,document.body.addEventListener("mousemove",this.onMouseMove))},onMouseMove(t){this.touchEnabled||(this.moveY=t.clientY,this._moveCalculate())},onTouchMove(t){this.startY&&1===t.touches.length&&(this.moveY=t.touches[0].clientY,this._moveCalculate())},_moveCalculate(){const t=this.moveY-this.startY;this.active?(this.currentDistance=Math.min(this.maxDistance,this.initY+t),this.doRefresh=this.currentDistance>this.refreshDistance,this.$refs.myContainer.style.top=this.currentDistance+"px",this.$refs.myIcon.style.opacity=this.doRefresh?1:.5):t>0?this._start():this._cancel()},onEnd(t){const s=Circ.easeOut;e.TweenLite.to(this.$refs.myContainer,this.transitionDuration,{top:`${this.initY}px`,ease:s,onComplete:()=>{this.doRefresh&&this.$emit("refresh"),this._cancel()}}),e.TweenLite.to(this.$data,this.transitionDuration,{currentDistance:0,ease:s})},_start(){this.active=!0,i.stopScroll(),this.touchEnabled?window.addEventListener("touchend",this.onEnd):window.addEventListener("mouseup",this.onEnd)},_cancel(){this.active=!1,this.startY=0,this.moveY=0,this.doRefresh=!1,i.startScroll(),window.removeEventListener("touchend",this.onEnd),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onEnd),document.body.removeEventListener("mousemove",this.onMouseMove)}},activated(){window.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousedown",this.onMouseStart)},deactivated(){window.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousedown",this.onMouseStart),this._cancel()}},o=(n(190),n(2)),r=Object(o.a)(a,function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"container",class:[this.active?"container-active":null]},[s("div",{ref:"myContainer",staticClass:"icon-container"},[s("i",{ref:"myIcon",staticClass:"iconfont icon-reload",style:{transform:"rotate("+360*this.currentDistance/this.maxDistance+"deg)"}})])])},[],!1,null,"392d4065",null);s.a=r.exports},188:function(t,s,n){var e=n(205);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);(0,n(4).default)("7cd4ea18",e,!0,{})},189:function(t,s,n){(t.exports=n(3)(!1)).push([t.i,"\n.icon-reload[data-v-392d4065] {\n  font-size: 30px;\n  line-height: 50px;\n  color: #6fa9b3;\n  display: inline-block;\n}\n.container[data-v-392d4065] {\n  position: fixed;\n  background: rgba(0,0,0,0.2);\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  visibility: hidden;\n}\n.container-active[data-v-392d4065] {\n  visibility: visible;\n}\n.icon-container[data-v-392d4065] {\n  width: 50px;\n  height: 50px;\n  border-radius: 50px;\n  background: #fff;\n  position: absolute;\n  top: 80px;\n  left: calc(50% - 25px);\n  text-align: center;\n}\n",""])},190:function(t,s,n){"use strict";var e=n(56);n.n(e).a},191:function(t,s){t.exports={stopScroll(){document.body.style.overflow="hidden"},startScroll(){document.body.style.overflow="auto"}}},193:function(t,s,n){var e=n(207);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);(0,n(4).default)("536ee61c",e,!0,{})},194:function(t,s,n){(t.exports=n(3)(!1)).push([t.i,"\n.iconfont[data-v-128025e4] {\n  color: #aaa;\n  font-size: 25px;\n}\n.heart[data-v-128025e4] {\n  opacity: 0;\n  position: absolute;\n  left: 0;\n}\n.like-container[data-v-128025e4] {\n  display: inline-block;\n  position: relative;\n}\n.like[data-v-128025e4] {\n  color: #aaa;\n  font-size: 20px;\n}\n",""])},195:function(t,s,n){"use strict";var e=n(57);n.n(e).a},196:function(t,s,n){var e={"./af":182,"./af.js":182,"./ar":181,"./ar-dz":180,"./ar-dz.js":180,"./ar-kw":179,"./ar-kw.js":179,"./ar-ly":178,"./ar-ly.js":178,"./ar-ma":177,"./ar-ma.js":177,"./ar-sa":176,"./ar-sa.js":176,"./ar-tn":175,"./ar-tn.js":175,"./ar.js":181,"./az":174,"./az.js":174,"./be":173,"./be.js":173,"./bg":172,"./bg.js":172,"./bm":171,"./bm.js":171,"./bn":170,"./bn.js":170,"./bo":169,"./bo.js":169,"./br":168,"./br.js":168,"./bs":167,"./bs.js":167,"./ca":166,"./ca.js":166,"./cs":165,"./cs.js":165,"./cv":164,"./cv.js":164,"./cy":163,"./cy.js":163,"./da":162,"./da.js":162,"./de":161,"./de-at":160,"./de-at.js":160,"./de-ch":159,"./de-ch.js":159,"./de.js":161,"./dv":158,"./dv.js":158,"./el":157,"./el.js":157,"./en-au":156,"./en-au.js":156,"./en-ca":155,"./en-ca.js":155,"./en-gb":154,"./en-gb.js":154,"./en-ie":153,"./en-ie.js":153,"./en-il":152,"./en-il.js":152,"./en-nz":151,"./en-nz.js":151,"./eo":150,"./eo.js":150,"./es":149,"./es-do":148,"./es-do.js":148,"./es-us":147,"./es-us.js":147,"./es.js":149,"./et":146,"./et.js":146,"./eu":145,"./eu.js":145,"./fa":144,"./fa.js":144,"./fi":143,"./fi.js":143,"./fo":142,"./fo.js":142,"./fr":141,"./fr-ca":140,"./fr-ca.js":140,"./fr-ch":139,"./fr-ch.js":139,"./fr.js":141,"./fy":138,"./fy.js":138,"./gd":137,"./gd.js":137,"./gl":136,"./gl.js":136,"./gom-latn":135,"./gom-latn.js":135,"./gu":134,"./gu.js":134,"./he":133,"./he.js":133,"./hi":132,"./hi.js":132,"./hr":131,"./hr.js":131,"./hu":130,"./hu.js":130,"./hy-am":129,"./hy-am.js":129,"./id":128,"./id.js":128,"./is":127,"./is.js":127,"./it":126,"./it.js":126,"./ja":125,"./ja.js":125,"./jv":124,"./jv.js":124,"./ka":123,"./ka.js":123,"./kk":122,"./kk.js":122,"./km":121,"./km.js":121,"./kn":120,"./kn.js":120,"./ko":119,"./ko.js":119,"./ky":118,"./ky.js":118,"./lb":117,"./lb.js":117,"./lo":116,"./lo.js":116,"./lt":115,"./lt.js":115,"./lv":114,"./lv.js":114,"./me":113,"./me.js":113,"./mi":112,"./mi.js":112,"./mk":111,"./mk.js":111,"./ml":110,"./ml.js":110,"./mn":109,"./mn.js":109,"./mr":108,"./mr.js":108,"./ms":107,"./ms-my":106,"./ms-my.js":106,"./ms.js":107,"./mt":105,"./mt.js":105,"./my":104,"./my.js":104,"./nb":103,"./nb.js":103,"./ne":102,"./ne.js":102,"./nl":101,"./nl-be":100,"./nl-be.js":100,"./nl.js":101,"./nn":99,"./nn.js":99,"./pa-in":98,"./pa-in.js":98,"./pl":97,"./pl.js":97,"./pt":96,"./pt-br":95,"./pt-br.js":95,"./pt.js":96,"./ro":94,"./ro.js":94,"./ru":93,"./ru.js":93,"./sd":92,"./sd.js":92,"./se":91,"./se.js":91,"./si":90,"./si.js":90,"./sk":89,"./sk.js":89,"./sl":88,"./sl.js":88,"./sq":87,"./sq.js":87,"./sr":86,"./sr-cyrl":85,"./sr-cyrl.js":85,"./sr.js":86,"./ss":84,"./ss.js":84,"./sv":83,"./sv.js":83,"./sw":82,"./sw.js":82,"./ta":81,"./ta.js":81,"./te":80,"./te.js":80,"./tet":79,"./tet.js":79,"./tg":78,"./tg.js":78,"./th":77,"./th.js":77,"./tl-ph":76,"./tl-ph.js":76,"./tlh":75,"./tlh.js":75,"./tr":74,"./tr.js":74,"./tzl":73,"./tzl.js":73,"./tzm":72,"./tzm-latn":71,"./tzm-latn.js":71,"./tzm.js":72,"./ug-cn":70,"./ug-cn.js":70,"./uk":69,"./uk.js":69,"./ur":68,"./ur.js":68,"./uz":67,"./uz-latn":66,"./uz-latn.js":66,"./uz.js":67,"./vi":65,"./vi.js":65,"./x-pseudo":64,"./x-pseudo.js":64,"./yo":63,"./yo.js":63,"./zh-cn":62,"./zh-cn.js":62,"./zh-hk":61,"./zh-hk.js":61,"./zh-tw":60,"./zh-tw.js":60};function i(t){var s=a(t);return n(s)}function a(t){var s=e[t];if(!(s+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return s}i.keys=function(){return Object.keys(e)},i.resolve=a,t.exports=i,i.id=196},205:function(t,s,n){(t.exports=n(3)(!1)).push([t.i,"\n.empty-container[data-v-3a7a3e39] {\n  text-align: center;\n  color: #ccc;\n  font-size: 20px;\n  padding-top: 10px;\n}\n.write-btn[data-v-3a7a3e39] {\n  position: fixed;\n  bottom: 30px;\n  right: 30px;\n  width: 50px;\n  height: 50px;\n  background: #6fa9b3;\n  text-align: center;\n  border-radius: 50px;\n  line-height: 50px;\n  box-shadow: 0 0 2px 1px rgba(0,0,0,0.2);\n}\n.iconfont[data-v-3a7a3e39] {\n  color: #fff;\n  font-size: 30px;\n}\n",""])},206:function(t,s,n){"use strict";var e=n(188);n.n(e).a},207:function(t,s,n){(t.exports=n(3)(!1)).push([t.i,"\n.icons-container[data-v-f0774dd0] {\n  display: inline-block;\n}\n.comment-count[data-v-f0774dd0] {\n  color: #aaa;\n  font-size: 20px;\n}\n.my-avatar[data-v-f0774dd0] {\n  flex-shrink: 0;\n}\n.iconfont[data-v-f0774dd0] {\n  color: #aaa;\n  font-size: 25px;\n  display: inline-block;\n}\n.icon-share[data-v-f0774dd0] {\n  margin-right: 5px;\n}\n.icon-mail[data-v-f0774dd0] {\n  margin-left: 5px;\n}\n.container[data-v-f0774dd0] {\n  box-sizing: border-box;\n  border-bottom: solid 1px #ddd;\n  padding: 15px;\n  display: flex;\n}\n.info-container[data-v-f0774dd0] {\n  width: 100%;\n  margin-left: 10px;\n}\n.top-container[data-v-f0774dd0] {\n  position: relative;\n}\n.author[data-v-f0774dd0] {\n  font-weight: bold;\n  font-size: 18px;\n  display: inline-block;\n  max-width: 250px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.content[data-v-f0774dd0] {\n  font-size: 18px;\n}\n.time[data-v-f0774dd0] {\n  position: absolute;\n  right: 0;\n  color: #ccc;\n}\n.icon-edit[data-v-f0774dd0] {\n  float: right;\n}\n",""])},208:function(t,s,n){"use strict";var e=n(193);n.n(e).a},211:function(t,s,n){"use strict";n.r(s);var e=n(14),i=n(13),a=n(59);const o=n(55);var r={components:{avatar:i.a,heart:a.a},props:["item"],methods:{read(){this.$router.push(`/article/${this.item._id}`)},onRead(t){!1===this.$refs.btns.contains(t.target)&&this.read()},onComment(){this.read()}},computed:{time(){return o(this.item.time).fromNow()},shareLink(){return`${window.location.origin}/article/${this.item._id}`}}},c=(n(208),n(2)),l=Object(c.a)(r,function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"container",on:{click:function(s){t.onRead(s)}}},[n("avatar",{staticClass:"my-avatar",attrs:{"avatar-url":t.item.avatar?t.item.avatar:null,"bg-color":"#eee","icon-color":"#aaa",round:!1,"avatar-width":"40px"}}),n("div",{staticClass:"info-container"},[n("div",{staticClass:"top-container"},[n("span",{staticClass:"author"},[t._v(t._s(t.item.author))]),n("span",{staticClass:"time"},[t._v(t._s(t.time))])]),n("p",{staticClass:"content",domProps:{innerHTML:t._s(t.input2Html(t.item.content))}}),n("div",{ref:"btns",staticClass:"icons-container"},[n("i",{staticClass:"iconfont icon-share copy",attrs:{"data-clipboard-text":t.shareLink}}),n("heart",{attrs:{item:t.item,api:"/api/article/like"}}),n("i",{staticClass:"iconfont icon-mail",on:{click:function(s){return s.stopPropagation(),t.onComment(s)}}}),n("span",{staticClass:"comment-count"},[t._v(t._s(t.item.comments_count))])],1)])],1)},[],!1,null,"f0774dd0",null).exports;const d=n(192);var h={data:()=>({throttleWrapper:null,loadmoreTriggerDistance:50,lastScrollY:0}),methods:{onScroll(){const t=window.scrollY>this.lastScrollY;this.lastScrollY=window.scrollY,this.$emit("scrollChanged",this.lastScrollY),t&&window.scrollY+window.innerHeight>=document.body.scrollHeight-this.loadmoreTriggerDistance&&this.$emit("loadmore")}},activated(){this.throttleWrapper=d(this.onScroll,100),window.addEventListener("scroll",this.throttleWrapper)},deactivated(){window.removeEventListener("scroll",this.throttleWrapper),this.throttleWrapper=null}},u=Object(c.a)(h,function(){var t=this.$createElement;return(this._self._c||t)("div")},[],!1,null,null,null).exports,m=n(183),p=n(58),f=n(5),v=n(24),j=n.n(v),b={components:{"nav-menu":e.a,subject:l,loadmore:u,refresh:m.a},computed:{user(){return this.$store.state.user}},methods:{loadData(){this.loading?this.toast("loading more data, please wait."):(this.loading=!0,j.a.get("/api/articles",{params:{since:this.since,count:this.count}}).then(t=>{t.data.length?(0===this.items.length&&p.TweenLite.fromTo(this.$refs["article-list"],1,{opacity:0},{opacity:1}),this.items=this.items.concat(t.data),this.since=this.items[this.items.length-1].time):this.toast("no more data."),this.loading=!1}).catch(t=>{this.toast("load error, please check your network."),this.loading=!1}))},onRefresh(){this.toast("refresh successfully!"),this._clear(),this.loadData()},_clear(){this.since=null,this.items.length=0,this.lastScrollY=0},onNewArticle(t){this.lastScrollY=0,this.items.unshift(t),this.$nextTick(function(){const t=this.$refs["article-list"].firstChild;p.TweenLite.fromTo(t,.5,{opacity:0},{opacity:1})})},onLoadMore(){this.loadData()},onScrollChanged(t){this.lastScrollY=t}},mounted(){this.loadData(),f.a.$on("newArticle",this.onNewArticle)},activated(){window.scrollTo(0,this.lastScrollY)},data:()=>({since:null,count:10,items:[],lastScrollY:0,loading:!1})},w=(n(206),Object(c.a)(b,function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"container"},[n("nav-menu",{staticClass:"head head-stick"}),n("div",{ref:"myContainer"},[n("div",{ref:"article-list"},t._l(t.items,function(t,s){return n("subject",{key:t._id,attrs:{item:t}})})),n("router-link",{attrs:{to:"/article/create"}},[n("div",{staticClass:"write-btn"},[n("i",{staticClass:"iconfont icon-edit"})])]),0===t.items.length?n("div",{staticClass:"empty-container"},[t._v("ooh! it's empty, any thoughts?")]):t._e()],1),n("refresh",{on:{refresh:t.onRefresh}}),n("loadmore",{on:{loadmore:t.onLoadMore,scrollChanged:t.onScrollChanged}})],1)},[],!1,null,"3a7a3e39",null));s.default=w.exports},56:function(t,s,n){var e=n(189);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);(0,n(4).default)("2b833ecb",e,!0,{})},57:function(t,s,n){var e=n(194);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);(0,n(4).default)("75b6a4be",e,!0,{})},59:function(t,s,n){"use strict";var e=n(58);const i=n(24);var a={props:["item","api"],data:()=>({like:!1,likePopTop:"-30px"}),methods:{onHeart(){i.post(this.api,{id:this.item._id}).then(t=>{0===t.data.code?(this.like=!0,void 0==this.item.like?this.$set(this.item,"like",1):this.item.like++,e.TweenLite.fromTo(this.$refs.myHeart,.5,{top:"0",opacity:1},{top:this.likePopTop,opacity:0})):this.toast("like failed: "+t.data.code)}).catch(t=>{this.toast("like failed: "+t)})}}},o=(n(195),n(2)),r=Object(o.a)(a,function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"like-container",on:{click:this.onHeart}},[s("i",{ref:"myHeart",staticClass:"iconfont icon-heart-fill heart"}),s("i",{class:["iconfont",this.like?"icon-heart-fill":"icon-heart"]}),s("span",{staticClass:"like"},[this._v(this._s(this.item.like))])])},[],!1,null,"128025e4",null);s.a=r.exports}}]);
//# sourceMappingURL=3.7843d2ef6b36887b3d19.js.map